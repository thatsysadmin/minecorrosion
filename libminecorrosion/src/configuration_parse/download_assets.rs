// TODO: Mostly steal the implementation from the fail1 branch.
// The code should still function correctly. I hope.

